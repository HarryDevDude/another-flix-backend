backend notes
npm init -y
npm i express mongoose dotenv
touch server.js .env .gitignore
add node_modules.env to gitignore

change in package.json:
from:
"main": "index.js", 
to:
"main": "server.js",


in server.js
// Imports
const express = require('express')
const app = express()
require('dotenv').config()

// ===== PORT =====
const port = 8080

app.listen(port, () => console.log(`Express app running on port ${port}`))

run nodemon in terminal should say, "[nodemon] starting `node server.js`
Express app running on port 8080"

(we should should start with Movie.js and ... before User.js because user.js is the most involved)
make User.js in models folder
in User.js write:

const mongoose = require('mongoose')
const Schema = mongoose.Schema

const userSchema = new Schema({
    firstName: {
        type: String,
        required: true
    },
    lastName: {
        type: String,
        required: true
    },
    email: {
        type: String,
        trim: true,
        lowercase: true,
        unique: true,
        required: true
    },
    password: {
        type: String,
        trim: true,
        minlength: 3,
        maxlength: 255,
        required: true
    },
    age: {
        type: Number,
        required: true
    },
    phone: Number,
    picture: String,
    active: Boolean,
    favorites: []
}, {
    timestamps: true
})

module.exports = mongoose.model('User', userSchema)


make Movie.js in models folder


make first route in server.js
// ===== ROUTES =====
// Movies
app.use('/api/v1/movies', require('./routes/api/movies.js'))

Then make an 'api' folder in the 'routes' folder and make a file called 'movies.js" in that folder. Write this:
const express = require('express')
const router = express.Router()
const moviesCtrl = require('../../controllers/api/movies')

// GET /api/v1/movies
router.get('/', moviesCtrl.index)

module.exports = router


Then make an 'api' folder in 'controllers' folder and make a file called 'movies.js" in that folder.  Write this:
const Movie = require('../../models/Movie')

// Find all movies
const index = async (req, res) => {
    try {
        const movies = await Movie.find({})
        res.status(200).json(movies)
    } catch(e) {
        res.status(400).json({msg: e.message})
    }
}

module.exports = {
    index
}


next rename 'utilities' folder to 'config'
make a file called, 'database.js' in config folder. Write this code:
const mongoose = require('mongoose')

mongoose.connect(process.env.MONGO_URI)

const db = mongoose.connection

db.on('connected', () => {
    console.log(`Connected to ${db.name} at ${db.host}:${db.port}.`)
})

connect the database 
by entering the connection link from mongoDB with the connect option into the .env file. Change the <password> with actual password. Before the '?' enter a name for the database. Use the project name.

Go to server.js and write:
require('./config/database')

